# Installation

This project includes the following components generated from OpenAPI specification:

- **Client SDK** – A PHP client for integrating with the streaming video service API.
- **Server Stub** – A PHP server stub based on the Laravel framework.

Both components were generated using **OpenAPI Generator** (`openapi-generator-cli.jar`) based on the OpenAPI specification file (`openapi.yaml`).

## Prerequisites

### PHP Requirements
- PHP 7.4 or newer for the client
- PHP 7.2.5 or newer for the server

### Additional Tools
- Composer (https://getcomposer.org/) for dependency management
- OpenAPI Generator (https://openapi-generator.tech) for code generation

---

## Installation Steps

### 1. Clone the Repository

Clone the repository and navigate to the project folder:

```bash
git clone https://github.com/knysh-se/learning-openapi-gen.git
cd learning-openapi-gen
```

### 2. Install OpenAPI Generator
Download OpenAPI Generator CLI:

```bash
wget https://repo1.maven.org/maven2/org/openapitools/openapi-generator-cli/7.9.0/openapi-generator-cli-7.9.0.jar -O openapi-generator-cli.jar
```

Alternatively, you can use:

```bash
java -jar openapi-generator-cli.jar help
```

---

## Client Installation

### 1. Install Dependencies
Navigate to the `php-client` directory and install dependencies using Composer:

```bash
cd php-client
composer install
```

### 2. Include the Client SDK in Your Code

You can manually include the generated client like this:

```php
<?php
require_once(__DIR__ . '/vendor/autoload.php');

$config = OpenAPI\Client\Configuration::getDefaultConfiguration()->setApiKey('X-API-KEY', 'YOUR_API_KEY');

$apiInstance = new OpenAPI\Client\Api\DefaultApi(
    new GuzzleHttp\Client(),
    $config
);

try {
    $result = $apiInstance->moviesGet();
    print_r($result);
} catch (Exception $e) {
    echo 'Exception when calling DefaultApi->moviesGet: ', $e->getMessage(), PHP_EOL;
}
```

### 3. Test the Client SDK
To run the tests:

```bash
vendor/bin/phpunit
```

---

## Server Installation

### 1. Install Dependencies
Navigate to the `php-server` directory and install dependencies:

```bash
cd php-server
composer install
```

### 2. Setup Environment
Create the `.env` file and generate the application key:

```bash
cp .env.example .env
php artisan key:generate
```

### 3. Start the Server
Run the Laravel server:

```bash
php artisan serve
```

The server will be available at:

```
http://localhost:8000/api/v1
```

---

## Tests

To run the tests, use:

```bash
cd php-client
composer install
vendor/bin/phpunit
```

---
